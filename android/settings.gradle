// Flutter Android project settings (Gradle 8+ compliant)

pluginManagement {
	// Load flutter.sdk from local.properties within the allowed block
	def flutterSdkPath = {
		def props = new Properties()
		def file = new File(rootDir, 'local.properties')
		if (file.exists()) {
			file.withReader('UTF-8') { reader ->
				props.load(reader)
			}
		}
		def path = props.getProperty('flutter.sdk')
		assert path != null : "flutter.sdk not set in local.properties. Run 'flutter doctor' or set it manually."
		return path
	}.call()

	repositories {
		google()
		mavenCentral()
		gradlePluginPortal()
		// Flutter engine artifacts
		maven { url uri("${flutterSdkPath}/bin/cache/artifacts/engine/android") }
	}
	// Make Flutter's Gradle plugin available to the build
	includeBuild("${flutterSdkPath}/packages/flutter_tools/gradle")
}

plugins {
	id "dev.flutter.flutter-plugin-loader" version "1.0.0"
	id "com.android.application" version "8.6.1" apply false
	id "com.android.library" version "8.6.1" apply false
	id "org.jetbrains.kotlin.android" version "1.9.24" apply false
}

rootProject.name = 'android'
include ':app'